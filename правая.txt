MODULE Barwwomen
    CONST robtarget pHomeR:=[[120.91,-150.98,150.41],[0.45262,-0.631828,0.533776,-0.333184],[0,0,1,4],[-101.662,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR10:=[[379.16,-186.84,302.86],[0.675317,-0.643073,0.341824,-0.116451],[1,-2,0,5],[-139.255,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR20:=[[432.59,171.95,353.77],[0.436305,-0.525441,-0.523862,-0.509037],[1,-3,0,4],[175.061,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR30:=[[466.93,-67.89,356.58],[0.276481,-0.675328,-0.356973,-0.583147],[1,-3,0,4],[-179.307,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR60:=[[389.77,291.38,371.73],[0.523681,-0.48585,-0.529336,-0.457725],[2,-3,0,4],[175.021,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR80:=[[370.12,333.70,277.90],[0.274372,-0.586478,-0.749762,-0.136457],[2,-3,0,5],[-149.35,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR70:=[[358.99,312.30,259.71],[0.208634,-0.277055,-0.920468,-0.180142],[2,-3,-1,5],[-151.185,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR90:=[[421.49,333.17,419.32],[0.00479809,-0.0434473,0.701057,0.711764],[2,-3,-1,5],[-170.869,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR100:=[[398.79,366.29,258.38],[0.00715722,0.0570827,-0.892718,-0.446928],[2,-3,-1,5],[173.018,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR110:=[[399.41,377.96,258.13],[0.0417825,0.047968,-0.905597,-0.419341],[2,-3,-1,5],[-170.186,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget pKranikR120:=[[342.11,293.26,300.26],[0.721032,-0.69214,0.0157592,0.0283925],[1,-3,0,4],[172.308,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR130:=[[395.52,378.44,249.95],[0.387059,-0.827372,0.406924,-0.00728486],[2,-2,0,4],[172.088,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR140:=[[398.81,365.59,263.09],[0.33219,-0.797404,0.50366,0.0111462],[2,-2,0,4],[-177.462,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR150:=[[394.69,368.63,265.14],[0.252927,-0.814212,0.502295,0.144176],[2,-1,0,4],[-164.051,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR160:=[[381.60,376.92,219.13],[0.296488,-0.848817,0.421973,0.116379],[2,-1,0,4],[-176.325,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR170:=[[401.88,343.96,316.75],[0.177223,-0.800571,0.543031,0.181096],[2,-1,0,4],[-144.701,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR180:=[[419.13,346.01,323.74],[0.225228,-0.856344,0.445089,0.133582],[2,-1,0,4],[-143.029,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR190:=[[412.03,344.96,312.08],[0.202607,-0.836076,0.489158,0.143707],[2,-1,0,4],[-145.788,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR200:=[[389.51,309.68,367.12],[0.486162,-0.750484,0.390648,0.218666],[2,-1,0,4],[-149,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR210:=[[390.74,319.96,325.91],[0.395936,-0.766236,0.471664,0.18344],[2,-1,0,4],[-152.232,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR220:=[[392.89,354.93,310.09],[0.329066,-0.786671,0.496673,0.161806],[2,-1,0,4],[-153.812,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR230:=[[427.19,267.09,298.45],[0.164841,-0.807811,0.546968,0.145238],[2,-1,0,4],[-152.438,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR240:=[[427.04,278.21,262.04],[0.193862,-0.811194,0.538896,0.118204],[2,-1,0,4],[-162.449,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR250:=[[421.83,301.13,234.17],[0.298554,-0.919829,0.251942,0.0361343],[2,-1,-1,4],[-174.334,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR260:=[[429.38,283.02,264.95],[0.241177,-0.948526,0.202335,0.0345347],[2,-1,-1,4],[-162.503,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka10:=[[416.73,349.25,435.11],[0.697539,-0.685658,0.129594,0.162844],[2,-1,-1,4],[-160.54,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka20:=[[410.36,255.90,363.10],[0.723299,-0.664735,0.148813,0.113227],[1,-1,-1,4],[-159.98,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka30:=[[393.35,89.96,60.06],[0.441855,-0.832932,0.320975,0.0892373],[1,-2,-1,4],[173.772,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka40:=[[416.37,178.68,40.76],[0.658433,-0.747171,0.0895088,-0.0137816],[1,-2,-1,5],[167.235,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka50:=[[347.38,150.35,237.60],[0.672975,-0.738758,0.0366274,-0.000637597],[1,-2,-1,7],[179.734,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka60:=[[381.15,142.43,68.67],[0.686397,-0.70158,0.157456,-0.108871],[1,-2,-1,5],[-161.04,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka70:=[[319.12,346.52,429.64],[0.782051,-0.603315,-0.0117222,0.155791],[2,-1,-1,4],[-162.485,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka80:=[[393.52,324.95,516.39],[0.867515,-0.490269,0.0312813,0.0779486],[2,-2,-1,5],[-138.97,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka90:=[[426.13,276.60,274.44],[0.295487,-0.954703,0.0186426,-0.0297004],[2,-1,-1,4],[-171.541,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka100:=[[370.23,265.65,277.48],[0.262062,-0.963008,-0.0569285,-0.0264382],[2,-1,-1,4],[-171.318,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka110:=[[363.10,247.47,350.26],[0.730799,-0.675691,0.0466242,0.0848548],[1,-2,-1,4],[-170.103,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka120:=[[354.42,266.34,312.07],[0.778454,-0.598648,0.160665,-0.0990772],[1,-2,-1,4],[-141.143,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka130:=[[327.57,130.12,239.70],[0.710744,-0.655101,0.22614,-0.120611],[1,-2,-1,4],[-146.233,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka140:=[[392.47,157.30,124.00],[0.720563,-0.674311,0.120722,-0.107331],[1,-2,-1,5],[-160.388,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka150:=[[377.29,135.42,56.27],[0.67528,-0.720489,0.13088,-0.0881093],[1,-2,-1,5],[-164.461,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka160:=[[443.29,282.30,269.51],[0.273267,-0.953444,0.0968495,-0.0830056],[2,-1,-1,4],[-160.451,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR270:=[[404.57,296.30,200.49],[0.287105,-0.93675,0.199979,-0.00888004],[2,-1,-1,4],[-177.055,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka170:=[[387.95,248.44,425.28],[0.849436,-0.508313,0.125534,0.0657075],[1,-1,-1,4],[-136.242,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka180:=[[389.08,324.83,461.19],[0.670578,-0.488109,-0.32677,-0.453097],[2,-2,-1,4],[-158.986,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka190:=[[335.90,330.58,421.19],[0.749875,-0.652344,-0.0268339,0.106841],[2,-1,-1,4],[-163.981,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka200:=[[302.30,183.82,393.41],[0.826306,-0.561305,0.0301824,-0.0352695],[1,-2,-1,4],[-154.281,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR280:=[[402.02,378.59,248.08],[0.26633,-0.926178,0.266798,-0.00898781],[2,-2,-1,4],[-147.151,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR290:=[[395.42,375.07,245.60],[0.21557,-0.828235,0.502583,0.122336],[2,-1,0,4],[-164.437,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR300:=[[368.03,390.28,214.09],[0.256812,-0.813424,0.49486,0.165837],[2,-1,0,4],[179.766,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka210:=[[399.59,197.98,52.81],[0.631113,-0.691807,0.246169,-0.250001],[1,-2,-1,5],[-124.199,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka220:=[[443.17,249.11,43.90],[0.626413,-0.68036,0.287257,-0.2494],[2,-2,-1,5],[-113.586,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka230:= [[478.09,159.09,61.33],[0.58388,-0.628775,0.377675,-0.347978],[2,-2,-1,5],[-95.9602,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka240:=[[514.03,89.87,121.56],[0.565709,-0.582176,0.393112,-0.431865],[1,-2,-1,5],[-95.6374,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka250:=[[467.35,59.59,448.88],[0.374468,-0.642965,0.34471,-0.572315],[1,-3,-1,4],[-92.8192,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka260:=[[456.69,198.90,263.50],[0.362928,-0.783039,0.486648,-0.135303],[1,-2,-1,4],[-107.259,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pStopka270:=[[448.57,215.41,217.89],[0.312272,-0.816313,0.476366,-0.0958904],[1,-2,-1,4],[-111.76,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR40:=[[435.77,10.47,320.17],[0.709737,-0.647874,0.186718,-0.20413],[1,-2,-1,5],[-153.946,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR50:=[[389.83,125.49,382.57],[0.850137,-0.525387,0.0158902,-0.0313722],[1,-2,-1,5],[-157.242,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR13:=[[473.47,155.33,116.32],[0.569813,-0.638231,0.364588,-0.367491],[1,-3,0,4],[-103.889,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR23:=[[473.56,155.27,55.96],[0.569828,-0.638145,0.364449,-0.367755],[1,-3,0,4],[-137.445,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR33:=[[473.56,155.27,80.97],[0.569838,-0.63814,0.364441,-0.367758],[1,-3,0,4],[-137.445,9E+09,9E+09,9E+09,9E+09,9E+09]];
     CONST robtarget pKranikR43:=[[373.56,155.27,80.98],[0.569851,-0.638131,0.364434,-0.367759],[1,-3,0,4],[-142.874,9E+09,9E+09,9E+09,9E+09,9E+09]];
    PROC initilise()
         SetDO custom_DO_1,0;
         SetDO custom_DO_2,0;
    ENDPROC    
    
    PROC MainKran()
        MoveJ pKranikR200, v100, z0, GripperR;
        MoveJ pKranikR210, v100, z0, GripperR;
        MoveJ pKranikR220, v100, z0, GripperR;
        MoveJ pKranikR290, v100, z0, GripperR;
        WaitTime 1;
        MoveJ pKranikR300, v100, z0, GripperR;
        WaitTime 3;
        MoveJ pKranikR150, v100, z0, GripperR;
        
    ENDPROC
    PROC MainKran2()
        MoveJ Offs (pKranikR150,0,0,25), v50, z0, GripperR;
        MoveJ pKranikR230, v50, z0, GripperR;
        MoveJ pKranikR240, v50, z0, GripperR;
        MoveJ pKranikR250, v100, fine, GripperR;

        MoveJ [[423.13,298.51,254.08],[0.300122,-0.941508,0.145389,-0.0485],[2,-1,-1,4],[-166.91,9E+09,9E+09,9E+09,9E+09,9E+09]], v100, fine , GripperR;
        WaitTime 2;
        MoveJ [[417.95,302.68,219.09],[0.311568,-0.940901,0.119248,-0.0584074],[2,-1,-1,4],[-177.126,9E+09,9E+09,9E+09,9E+09,9E+09]], v100, fine, GripperR;       
        WaitTime 2;
        MoveJ [[422.14,285.75,256.53],[0.253414,-0.958475,0.130629,-0.00649941],[2,-1,-1,4],[-162.272,9E+09,9E+09,9E+09,9E+09,9E+09]], v1000, fine, GripperR;
        SetDo  custom_DO_0,2;
        WaitDO custom_DO_0, 1;
        WaitTime 5;
    ENDPROC
    PROC MainStopka()
       
        MoveJ pStopka180, v100, fine, GripperR;
        MoveJ pStopka190, v100, fine, GripperR;
        MoveJ pStopka200, v100, fine, GripperR;
        MoveJ pStopka110, v100, fine, GripperR;
        MoveJ pStopka120, v100, fine, GripperR;
        MoveJ pStopka130, v100, fine, GripperR;
        MoveJ pStopka140, v100, fine, GripperR;
        MoveJ pStopka150, v100, fine, GripperR;
        g_GripOut;
        MoveJ Offs(pStopka40,12,0,0), v100, fine, GripperR;
        WaitTime 1;
        MoveJ pStopka210, v100, fine, GripperR;
        MoveJ pStopka220, v100, fine, GripperR;
        g_GripIn;
        MoveJ Offs( pStopka220,0,0,20), v100, fine, GripperR;
        MoveL pStopka230, v100, fine, GripperR;
        MoveL Offs(pStopka230,0,0,-15), v50, fine, GripperR;
        g_GripOut;
        MoveL Offs(pStopka230,0,0,45), v50, fine, GripperR;
        MoveJ pStopka240, v50, fine, GripperR;
        g_GripIn;
        MoveJ Offs( pStopka240,0,0,50), v150, fine, GripperR;
        WaitTime 1;
        MoveJ pStopka250, v150, fine, GripperR;
        MoveJ pStopka260, v150, fine, GripperR;
        SetDo  custom_DO_0,0;
	    WaitDO custom_do_0,1;
    ENDPROC
    PROC MainKran3()
        WaitTime 1; 
        MoveJ pStopka270, v100, fine, GripperR;
        WaitTime 2;
        MoveJ pStopka260, v50, fine, GripperR;
    ENDPROC
    PROC Otdacha()
        MoveJ pStopka260, v150, fine, GripperR;
        MoveJ pStopka250, v150, fine, GripperR;
        MoveJ Offs( pStopka240,0,0,50), v150, fine, GripperR;
        g_GripOut;
        MoveJ pKranikR13, v150, fine, GripperR;
        MoveL pKranikR23, v150, fine, GripperR;
        g_GripIn;
        WaitTime 1;
        MoveL Offs(pKranikR23,0,0,25), v50, fine, GripperR;
        WaitTime 2;
        MoveJ Offs(pKranikR33,-100,0,0), v30, fine, GripperR;
        WaitTime 3;
        MoveL Offs( pKranikR43,0,0,100), v30, fine, GripperR;
        TPErase;
        custom_DO_5:=1;
         TPReadFK reg3, "Liquid ready", stEmpty, stEmpty, stEmpty, stEmpty, "Ok";
         WaitTime 1;
         g_gripout;
         WaitTime 2;
         custom_DO_5:=0;
         main;
         
         

    ENDPROC
    PROC main()
        !go kranik!
        initilise;
        MoveJ pHomeR, v150, z0, GripperR;
        g_GripIn;
        WaitTime 1;
        MoveJ pKranikR10, v150, z0, GripperR;
        MoveJ pKranikR40, v150, z0, GripperR;
        MoveJ pKranikR30, v150, z0, GripperR;
        MoveJ pKranikR50, v150, z0, GripperR;
      !  MoveJ pKranikR20, v150, z0, GripperR;
        WaitDO custom_do_0,0;
        WaitTime 2;
        MainKran;
        SetDo  custom_DO_0,1;
        WaitDO custom_DO_0, 0;
        MainKran2;
        MainStopka;
        MainKran3; 
	SetDo  custom_DO_0,0;
	WaitDO custom_do_0,1;
	Otdacha;   
   ENDPROC
ENDMODULE